<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Player InfoBar</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      height: 100%;
      font-family: Arial, sans-serif;
      background: transparent !important;
      overflow: hidden;
      color: white;
    }

    #infobar-container {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 300px;
      background-color: #222;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
      padding: 16px 20px;
    }

    #infobar h2 {
      color: #0f0;
      font-size: 18px;
      margin-bottom: 10px;
    }

    .info-item {
      margin-bottom: 8px;
      background-color: #333;
      border-radius: 8px;
      padding: 8px 12px;
      position: relative;
    }

    .info-item span {
      display: block;
      font-weight: bold;
      color: #0f0;
    }

    .border-anim {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .border-anim svg {
      width: 100%;
      height: 100%;
    }

    .border-anim rect {
      fill: none;
      stroke: #0f0;
      stroke-width: 2;
      stroke-dasharray: 600;
      stroke-dashoffset: 0;
      animation: dashShrink 1350ms linear infinite;
    }

    @keyframes dashShrink {
      from { stroke-dashoffset: 0; }
      to { stroke-dashoffset: 1200; }
    }
  </style>
</head>
<body>

  <div id="infobar-container">
    <div id="infobar">
      <h2>Player Info</h2>

      <div class="info-item" id="name-box">
        Name: <span id="player-name">Loading...</span>
        <div class="border-anim">
          <svg viewBox="0 0 300 40" preserveAspectRatio="none">
            <rect x="1" y="1" width="298" height="38" rx="8" ry="8"/>
          </svg>
        </div>
      </div>

      <div class="info-item" id="id-box">
        Server ID: <span id="player-id">---</span>
        <div class="border-anim">
          <svg viewBox="0 0 300 40" preserveAspectRatio="none">
            <rect x="1" y="1" width="298" height="38" rx="8" ry="8"/>
          </svg>
        </div>
      </div>

      <div class="info-item" id="dist-box">
        Distance: <span id="player-dist">---</span>
        <div class="border-anim">
          <svg viewBox="0 0 300 40" preserveAspectRatio="none">
            <rect x="1" y="1" width="298" height="38" rx="8" ry="8"/>
          </svg>
        </div>
      </div>

      <div class="info-item" id="weap-box">
        Weapon: <span id="player-weap">---</span>
        <div class="border-anim">
          <svg viewBox="0 0 300 40" preserveAspectRatio="none">
            <rect x="1" y="1" width="298" height="38" rx="8" ry="8"/>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <script>
    let PlayerName = null;
    let PlayerId = null;
    let PlayerDist = null;
    let PlayerWeap = null;

    window.addEventListener('message', ({ data }) => {
      let msg = typeof data === 'string' ? JSON.parse(data) : data;

      switch (msg.type) {
        case 'PlayerName':
          PlayerName = msg.data.name;
          document.getElementById('player-name').textContent = PlayerName;
          break;
        case 'PlayerId':
          PlayerId = msg.data.id;
          document.getElementById('player-id').textContent = PlayerId;
          break;
        case 'PlayerDist':
          PlayerDist = msg.data.distance;
          document.getElementById('player-dist').textContent = `${PlayerDist.toFixed(2)}m`;
          break;
        case 'PlayerWeap':
          PlayerWeap = msg.data.weapon;
          document.getElementById('player-weap').textContent = PlayerWeap;
          break;
      }
    });
  </script>

</body>
</html>
